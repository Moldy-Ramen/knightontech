(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{7328:(e,a,s)=>{s(9836)},7808:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var t=s(7876),r=s(4232);function l(){let[e,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)(!1),[c,i]=(0,r.useState)(""),[o,u]=(0,r.useState)(""),[h,p]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[g,j]=(0,r.useState)([]),[f,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(1),[N,w]=(0,r.useState)("orders"),[C,S]=(0,r.useState)(!1),[_,k]=(0,r.useState)(null),[P,E]=(0,r.useState)({name:"",price:"",discount:0,cpu:"",motherboard:"",featuresMotherboard:"",ram:"",gpu:"",storage:"",cooler:"",case:"",featuresCase:"",powerSupply:"",image:"",file:null});(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/orders");if(200===e.status){d(!0),l(!0);let a=await e.json();p(a.orders||[])}else d(!1),l(!0)}catch(e){d(!1),l(!0)}})()},[]);let M=async()=>{try{let e=await fetch("/api/orders");if(200===e.status){let a=await e.json();p(a.orders||[])}else 401===e.status&&d(!1)}catch(e){d(!1),console.error("Failed to load orders",e)}},T=async()=>{try{let e=await fetch("/api/products");if(200===e.status){let a=await e.json();m(a.products||[])}else 401===e.status&&d(!1)}catch(e){d(!1),console.error("Failed to load products",e)}},F=async e=>{e.preventDefault(),u(""),(await fetch("/api/admin-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:c})})).ok?window.location.reload():u("Incorrect password")};(0,r.useEffect)(()=>{j(h.filter(e=>JSON.stringify(e).toLowerCase().includes(f.toLowerCase()))),v(1)},[f,h]);let A=(e,a)=>{E(s=>({...s,[e]:a}))},O=async()=>{try{let e=P.image;if(P.file){let a=new FormData;a.append("file",P.file);let s=await fetch("/api/upload",{method:"POST",body:a});e=(await s.json()).url}let a={name:P.name,price:parseFloat(P.price),cpu:P.cpu,motherboard:P.motherboard,featuresMotherboard:P.featuresMotherboard.split(",").map(e=>e.trim()),ram:P.ram,gpu:P.gpu,storage:P.storage,cooler:P.cooler,case:P.case,featuresCase:P.featuresCase.split(",").map(e=>e.trim()),powerSupply:P.powerSupply,image:e},s=_?"PUT":"POST",t=_?"/api/products/".concat(_._id):"/api/products";if(!(await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Save failed");await T(),E({name:"",price:"",cpu:"",motherboard:"",featuresMotherboard:"",ram:"",gpu:"",storage:"",cooler:"",case:"",featuresCase:"",powerSupply:"",image:"",file:null}),k(null),S(!1)}catch(e){alert("Error saving product"),console.error(e)}},L=e=>{k(e),E({...e,price:e.price.toString(),file:null}),S(!0)},D=async e=>{confirm("Delete this product?")&&(await fetch("/api/products/".concat(e),{method:"DELETE"}),m(a=>a.filter(a=>a._id!==e)))},I=Math.ceil(g.length/10),U=g.slice((y-1)*10,10*y),z=async(e,a)=>{let s=await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})});s.ok?M():console.error("Failed to update status:",await s.text())};return(0,r.useEffect)(()=>{n&&"products"===N&&T()},[n,N]),(0,r.useEffect)(()=>{n&&"orders"===N&&M()},[n,N]),(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[(0,t.jsxs)("nav",{className:"bg-[#1f2937] shadow z-20 relative",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,t.jsx)("a",{href:"/",className:"flex items-center",children:(0,t.jsx)("img",{src:"/img/Knighton_Tech_Full _White.png",alt:"Knighton Tech",className:"h-10 w-auto"})}),(0,t.jsxs)("ul",{className:"hidden md:flex space-x-6 text-sm font-medium items-center",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/",className:"hover:text-blue-400",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/services",className:"hover:text-blue-400",children:"Services"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/store",className:"hover:text-blue-400",children:"Store"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/contact",className:"hover:text-blue-400",children:"Contact Us"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/admin",className:"text-blue-400 font-bold",children:"Admin"})})]}),(0,t.jsx)("button",{className:"md:hidden focus:outline-none",onClick:()=>a(!e),children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),e&&(0,t.jsx)("div",{className:"md:hidden px-4 pb-4",children:(0,t.jsxs)("ul",{className:"flex flex-col space-y-2 text-sm font-medium",children:[(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/",className:"hover:text-blue-400",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/services",className:"hover:text-blue-400",children:"Services"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/store",className:"hover:text-blue-400",children:"Store"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/contact",className:"hover:text-blue-400",children:"Contact Us"})}),(0,t.jsx)("li",{children:(0,t.jsx)("a",{href:"/admin",className:"text-blue-400 font-bold",children:"Admin"})})]})})]}),(0,t.jsxs)("main",{className:"relative flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center blur-sm brightness-50 z-0",style:{backgroundImage:"url('/img/hero-background.jpg')"}}),(0,t.jsx)("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-20",children:s?n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsx)("button",{onClick:()=>w("orders"),className:"orders"===N?"font-bold text-white":"text-gray-400",children:"Orders"}),(0,t.jsx)("button",{onClick:()=>w("products"),className:"products"===N?"font-bold text-white":"text-gray-400",children:"Products"})]}),"orders"===N&&(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"text",placeholder:"Search orders...",value:f,onChange:e=>b(e.target.value),className:"mb-4 p-2 w-full bg-gray-800 rounded"}),(0,t.jsxs)("div",{className:"space-y-4",children:[0===U.length&&(0,t.jsx)("div",{className:"text-center text-gray-400 py-8",children:"No orders found."}),U.map(e=>{var a,s,r,l,n;let d=e.orderNumber||e._id;return(0,t.jsxs)("div",{className:"bg-gray-800 p-4 rounded space-y-2",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Order #:"})," ",e.orderNumber||e._id]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Phone:"})," ",e.phone]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Address:"})," ",e.address.line1,", ",e.address.city,", ",e.address.state," ",e.address.postal_code,", ",e.address.country]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Items:"}),(0,t.jsx)("ul",{className:"ml-4 list-disc list-inside",children:e.items.map((e,a)=>(0,t.jsxs)("li",{children:[e.name," \xd7",e.qty," @ ",e.price]},a))})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Shipping:"})," ",null!=(n=null==(a=e.shipping)?void 0:a.carrier)?n:"N/A"," – $",(null==(s=e.shipping)?void 0:s.rate)!=null?e.shipping.rate.toFixed(2):"0.00"," ",(null==(r=e.shipping)?void 0:r.delivery_days)!=null?"(".concat(e.shipping.delivery_days," days)"):(null==(l=e.shipping)?void 0:l.estimated_delivery)?"(".concat(e.shipping.estimated_delivery,")"):""]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Total:"})," $",e.total.toFixed(2)]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Created:"})," ",new Date(e.createdAt).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"font-semibold",children:"Status:"}),(0,t.jsx)("select",{value:e.status,onChange:e=>z(d,e.target.value),className:"bg-gray-700 text-white rounded p-1",children:["Pending","Accepted","In Progress","Completed"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsx)("a",{href:"/api/get-receipt-pdf?session_id=".concat(e.sessionId),target:"_blank",className:"inline-block mt-2 bg-blue-600 px-3 py-1 rounded",children:"Receipt"})]},d)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,t.jsx)("button",{onClick:()=>v(e=>Math.max(e-1,1)),disabled:1===y,className:"px-4 py-2 rounded ".concat(1===y?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"),children:"Prev"}),(0,t.jsxs)("span",{children:["Page ",y," of ",I]}),(0,t.jsx)("button",{onClick:()=>v(e=>Math.min(e+1,I)),disabled:y===I,className:"px-4 py-2 rounded ".concat(y===I?"bg-gray-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500"),children:"Next"})]})]}),"products"===N&&(0,t.jsxs)("div",{children:[(0,t.jsx)("button",{onClick:()=>{S(!0),k(null)},className:"mb-4 bg-green-600 px-3 py-1 rounded",children:"Add Product"}),(0,t.jsxs)("div",{className:"space-y-4",children:[0===x.length&&(0,t.jsx)("div",{className:"text-center text-gray-400 py-8",children:"No products found."}),x.map(e=>(0,t.jsxs)("div",{className:"bg-gray-800 p-4 rounded flex items-center justify-between",children:[(0,t.jsx)("img",{src:e.image,alt:e.name,className:"h-16 w-16 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1 ml-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:e.specs}),(0,t.jsxs)("p",{children:["$",e.price.toFixed(2),e.discount>0&&(0,t.jsxs)("span",{className:"ml-2 text-red-500",children:["−",e.discount,"%"]})]})]}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)("button",{onClick:()=>L(e),className:"px-2 py-1 bg-blue-600 rounded",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>D(e._id),className:"px-2 py-1 bg-red-600 rounded",children:"Delete"})]})]},e._id))]}),C&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg w-96 space-y-3 overflow-auto max-h-full",children:[(0,t.jsxs)("h3",{className:"text-xl mb-4",children:[_?"Edit":"Add"," Product"]}),(0,t.jsx)("input",{placeholder:"Name",value:P.name,onChange:e=>A("name",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Price",value:P.price,onChange:e=>A("price",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"CPU",value:P.cpu,onChange:e=>A("cpu",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Motherboard",value:P.motherboard,onChange:e=>A("motherboard",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("textarea",{placeholder:"Motherboard Features (comma-separated)",value:P.featuresMotherboard,onChange:e=>A("featuresMotherboard",e.target.value),className:"w-full p-2 bg-gray-800 rounded h-20"}),(0,t.jsx)("input",{placeholder:"RAM",value:P.ram,onChange:e=>A("ram",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Graphics Card",value:P.gpu,onChange:e=>A("gpu",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Storage",value:P.storage,onChange:e=>A("storage",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Cooler",value:P.cooler,onChange:e=>A("cooler",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Case",value:P.case,onChange:e=>A("case",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("textarea",{placeholder:"Case Features (comma-separated)",value:P.featuresCase,onChange:e=>A("featuresCase",e.target.value),className:"w-full p-2 bg-gray-800 rounded h-20"}),(0,t.jsx)("input",{placeholder:"Power Supply",value:P.powerSupply,onChange:e=>A("powerSupply",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsx)("input",{placeholder:"Image URL (https://...)",value:P.image,onChange:e=>A("image",e.target.value),className:"w-full p-2 bg-gray-800 rounded"}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,t.jsx)("button",{onClick:()=>{S(!1),k(null)},className:"px-3 py-1 bg-gray-700 rounded",children:"Cancel"}),(0,t.jsx)("button",{onClick:O,className:"px-3 py-1 bg-green-600 rounded",children:"Save"})]})]})})]})]}):(0,t.jsxs)("div",{className:"max-w-xs mx-auto bg-gray-900 p-6 rounded shadow space-y-4",children:[(0,t.jsx)("p",{className:"text-red-500 text-center",children:"Not authorized"}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-2",children:[(0,t.jsx)("input",{type:"password",value:c,onChange:e=>i(e.target.value),placeholder:"Admin Password",className:"w-full p-2 rounded bg-gray-800"}),o&&(0,t.jsx)("p",{className:"text-red-400 text-sm",children:o}),(0,t.jsx)("button",{className:"w-full bg-blue-600 py-2 rounded",type:"submit",children:"Login"})]})]}):(0,t.jsx)("div",{children:"Loading..."})})]}),(0,t.jsx)("footer",{className:"bg-[#1f2937] text-center py-4 text-sm text-gray-400",children:"\xa9 2025 Knighton Tech. All rights reserved."})]})}s(7328)},8210:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(7808)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[636,593,792],()=>a(8210)),_N_E=e.O()}]);