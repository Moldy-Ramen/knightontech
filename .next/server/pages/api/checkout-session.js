"use strict";(()=>{var t={};t.id=152,t.ids=[152],t.modules={3132:(t,e,a)=>{a.a(t,async(t,s)=>{try{a.r(e),a.d(e,{default:()=>r});var n=a(9767),o=t([n]);let i=new(n=(o.then?(await o)():o)[0]).default(process.env.STRIPE_SECRET_KEY);async function r(t,e){let{session_id:a}=t.query;if("GET"!==t.method)return e.status(405).end("Method not allowed");if(!a)return e.status(400).json({error:"Missing session_id"});try{let t=await i.checkout.sessions.retrieve(a,{expand:["line_items.data.price.product"]}),s=await i.checkout.sessions.listLineItems(a,{limit:100}),n={customer_name:t.metadata?.name||t.customer_details?.name||"",customer_email:t.customer_details?.email||"",customer_phone:t.metadata?.phone||t.customer_details?.phone||"",shipping_address:{line1:t.metadata?.address_line1||"",city:t.metadata?.address_city||"",state:t.metadata?.address_state||"",postal_code:t.metadata?.address_postal_code||"",country:t.metadata?.address_country||""},line_items:s.data.map(t=>({description:t.description,quantity:t.quantity,amount:(t.amount_subtotal??t.amount_total)/100})),tax:(t.amount_subtotal-t.amount_total+t.amount_tax-t.total_details?.amount_shipping,t.amount_tax/100),shipping:t.total_details?.amount_shipping/100,total:t.amount_total/100,payment_status:t.payment_status,created:t.created};e.status(200).json(n)}catch(t){console.error("âŒ Error fetching checkout session:",t.message),e.status(500).json({error:"Internal Server Error"})}}s()}catch(t){s(t)}})},3480:(t,e,a)=>{t.exports=a(5600)},4046:(t,e,a)=>{a.a(t,async(t,s)=>{try{a.r(e),a.d(e,{config:()=>c,default:()=>d,routeModule:()=>m});var n=a(3480),o=a(8667),r=a(6435),i=a(3132),u=t([i]);i=(u.then?(await u)():u)[0];let d=(0,r.M)(i,"default"),c=(0,r.M)(i,"config"),m=new n.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/checkout-session",pathname:"/api/checkout-session",bundlePath:"",filename:""},userland:i});s()}catch(t){s(t)}})},5600:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(t,e)=>{Object.defineProperty(e,"M",{enumerable:!0,get:function(){return function t(e,a){return a in e?e[a]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,a)):"function"==typeof e&&"default"===a?e:void 0}}})},8667:(t,e)=>{Object.defineProperty(e,"A",{enumerable:!0,get:function(){return a}});var a=function(t){return t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t}({})},9767:t=>{t.exports=import("stripe")}};var e=require("../../webpack-api-runtime.js");e.C(t);var a=e(e.s=4046);module.exports=a})();